<!-- views/users/edit.ejs -->

<!DOCTYPE html>
<html>

<head>
    <%- include('../partials/head') %>
</head>

<body>
    <%- include('../partials/nav') %>

    <link rel="stylesheet" type="text/css" href="/public/css/user.css"/>

        <div class="user-edit-box">

            <h3 class="mb-3">회원정보 수정</h3>

            <form action="/users/<%= username %>?_method=put" method="post">
                <!-- 1 -->
                <br></br>
                <div class="form-group row">
                    <label for="currentPassword" class="col-sm-3 col-form-label">현재 비밀번호
                        <span style="color:red;">*</span>
                    </label>
                    <div class="col-sm-9 col-sm-offset-3">
                        <input type="password" id="currentPassword" name="currentPassword" value="" style="width:300px;"
                            class="form-control <%= (errors.currentPassword)?'is-invalid':'' %>"> <!-- 2 -->
                        <% if(errors.currentPassword){ %>
                            <!-- 3 -->
                            <span class="invalid-feedback">
                                <%= errors.currentPassword.message %>
                            </span>
                            <% } %>
                    </div>
                </div>

                <hr>
                </hr>

                <div class="form-group row">
                    <label for="username" class="col-sm-3 col-form-label">아이디
                        <span style="color:red;">*</span>
                    </label>
                    <div class="col-sm-9">
                        <input type="text" id="username" name="username" value="<%= user.username %>" style="width:300px;"
                            class="form-control <%= (errors.username)?'is-invalid':'' %>"> <!-- 2 -->
                        <% if(errors.username){ %>
                            <!-- 3 -->
                            <span class="invalid-feedback">
                                <%= errors.username.message %>
                            </span>
                            <% } %>
                    </div>
                </div>

                <div class="form-group row">
                    <label for="name" class="col-sm-3 col-form-label">이름
                        <span style="color:red;">*</span>
                    </label>
                    <div class="col-sm-9">
                        <input type="text" id="name" name="name" value="<%= user.name %>" style="width:300px;"
                            class="form-control <%= (errors.name)?'is-invalid':'' %>"> <!-- 2 -->
                        <% if(errors.name){ %>
                            <!-- 3 -->
                            <span class="invalid-feedback">
                                <%= errors.name.message %>
                            </span>
                            <% } %>
                    </div>
                </div>

                <div class="form-group row">
                    <label for="email" class="col-sm-3 col-form-label">E-mail</label>
                    <div class="col-sm-9">
                        <input type="text" id="email" name="email" value="<%= user.email %>" style="width:300px;"
                            class="form-control <%= (errors.email)?'is-invalid':'' %>"> <!-- 2 -->
                        <% if(errors.email){ %>
                            <!-- 3 -->
                            <span class="invalid-feedback">
                                <%= errors.email.message %>
                            </span>
                            <% } %>
                    </div>
                </div>

                <div class="form-group row">
                    <label for="newPassword" class="col-sm-3 col-form-label">새 비밀번호
                        <span style="color:red;">*</span>
                    </label>
                    <div class="col-sm-9 col-sm-offset-3">
                        <input type="password" id="newPassword" name="newPassword" value="" style="width:300px;"
                            class="form-control <%= (errors.newPassword)?'is-invalid':'' %>"> <!-- 2 -->
                        <% if(errors.newPassword){ %>
                            <!-- 3 -->
                            <span class="invalid-feedback">
                                <%= errors.newPassword.message %>
                            </span>
                            <% } %>
                    </div>
                </div>

                <div class="form-group row">
                    <label for="passwordConfirmation" class="col-sm-3 col-form-label">비밀번호 확인
                        <span style="color:red;">*</span>
                    </label>
                    <div class="col-sm-9 col-sm-offset-3">
                        <input type="password" id="passwordConfirmation" name="passwordConfirmation" value="" style="width:300px;"
                            class="form-control <%= (errors.passwordConfirmation)?'is-invalid':'' %>"> <!-- 2 -->
                        <% if(errors.passwordConfirmation){ %>
                            <!-- 3 -->
                            <span class="invalid-feedback">
                                <%= errors.passwordConfirmation.message %>
                            </span>
                            <% } %>
                    </div>
                </div>
                    <small><span style="color:red;">(*)표시는 필수 항목입니다</span></small>
                <% if(errors.unhandled){ %>
                    <!-- 4 -->
                    <div class="alert alert-danger">
                        <%= errors.unhandled %>
                    </div>
                    <% } %>

                        <div class="buttons">
                            <a class="btn btn-primary" style="position: relative; left:400px; bottom:30px"  href="/users/<%= user.username %>">이전으로</a>
                            <button type="submit" style="position: relative; left:400px; bottom:30px" class="btn btn-primary">완료</button>
                        </div>

            </form>
        </div>
</body>
<style>
    body {
        background-image: url(/public/images/wall.jpg);
        background-size: cover;
    }
</style>
</html>